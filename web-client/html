<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Система тестирования - Студент</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Шапка состояния -->
    <div id="statusBar">
        <span id="userStatus">Статус: Неизвестный</span>
        <span id="userInfo"></span>
    </div>

    <!-- Состояние 1: Неизвестный -->
    <div id="stateUnknown" class="state active">
        <h1>Вход в систему</h1>
        <div class="auth-options">
            <button onclick="startAuth('github')" class="auth-btn github">GitHub</button>
            <button onclick="startAuth('yandex')" class="auth-btn yandex">Яндекс</button>
            <button onclick="showCodeModal()" class="auth-btn code">По коду</button>
        </div>
    </div>

    <!-- Состояние 2: Анонимный -->
    <div id="stateAnonymous" class="state">
        <h2>Ожидание подтверждения...</h2>
        <div class="auth-waiting">
            <div class="spinner"></div>
            <p>Ожидайте подтверждения входа</p>
            <button onclick="cancelAuth()" class="btn-secondary">Отмена</button>
        </div>
    </div>

    <!-- Состояние 3: Авторизованный -->
    <div id="stateAuthorized" class="state">
        <!-- Панель навигации -->
        <div class="nav-panel">
            <button onclick="showSection('courses')" class="nav-btn active">Мои курсы</button>
            <button onclick="showSection('allcourses')" class="nav-btn">Все курсы</button>
            <button onclick="showSection('tests')" class="nav-btn">Активные тесты</button>
            <button onclick="showSection('results')" class="nav-btn">Результаты</button>
            <button onclick="showSection('profile')" class="nav-btn">Профиль</button>
            <button onclick="showSection('admin')" class="nav-btn admin-btn" style="display:none;">Админ-панель</button>
            <button onclick="logout()" class="nav-btn logout">Выйти</button>
        </div>

        <!-- Контент -->
        <div id="content">
            <!-- Раздел курсов -->
            <div id="sectionCourses" class="section active">
                <h2>Мои курсы</h2>
                <div id="coursesList" class="cards-container">
                    <div class="loading">Загрузка курсов...</div>
                </div>
            </div>

            <!-- Раздел всех курсов -->
            <div id="sectionAllcourses" class="section">
                <h2>Все курсы</h2>
                <div id="allCoursesList" class="cards-container">
                    <div class="loading">Загрузка всех курсов...</div>
                </div>
            </div>

            <!-- Раздел тестов -->
            <div id="sectionTests" class="section">
                <h2>Тесты</h2>
                <div id="courseInfo" class="course-header"></div>
                <div id="testsList" class="cards-container">
                    <div class="loading">Загрузка тестов...</div>
                </div>
            </div>

            <!-- Раздел результатов -->
            <div id="sectionResults" class="section">
                <h2>Мои результаты</h2>
                <div id="resultsList" class="cards-container">
                    <div class="loading">Загрузка результатов...</div>
                </div>
            </div>

            <!-- Раздел профиля -->
            <div id="sectionProfile" class="section">
                <h2>Мой профиль</h2>
                <div id="profileContent" class="cards-container">
                    <div class="loading">Загрузка профиля...</div>
                </div>
            </div>

            <!-- Раздел админ-панели -->
            <div id="sectionAdmin" class="section">
                <h2>Админ-панель</h2>
                <div class="admin-panel">
                    <button onclick="adminCreateCourse()" class="btn-primary">Создать курс</button>
                    <button onclick="adminShowUsers()" class="btn-primary">Управление пользователями</button>
                    <button onclick="adminShowQuestions()" class="btn-primary">Управление вопросами</button>
                    <div id="adminContent" class="cards-container">
                        <div class="loading">Выберите действие</div>
                    </div>
                </div>
            </div>

            <!-- Раздел тестирования -->
            <div id="sectionTest" class="section">
                <div class="test-header">
                    <h2 id="testTitle"></h2>
                    <div class="test-info">
                        <span id="questionCounter">Вопрос 0/0</span>
                        <button onclick="finishTest()" class="btn-danger">Завершить</button>
                    </div>
                </div>
                <div id="testContent" class="test-content">
                    <!-- Вопросы загружаются динамически -->
                </div>
            </div>

            <!-- Раздел результата теста -->
            <div id="sectionTestResult" class="section">
                <div class="result-card">
                    <h2>Тест завершен</h2>
                    <div id="testResultContent"></div>
                    <button onclick="backToTests()" class="btn-primary">Вернуться к тестам</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно для кода -->
    <div id="codeModal" class="modal">
        <div class="modal-content">
            <h3>Вход по коду</h3>
            <p>Введите 6-значный код:</p>
            <input type="text" id="authCode" maxlength="6" placeholder="123456">
            <div class="modal-buttons">
                <button onclick="submitCode()" class="btn-primary">Войти</button>
                <button onclick="hideCodeModal()" class="btn-secondary">Отмена</button>
            </div>
        </div>
    </div>

    <!-- Модальное окно для создания курса -->
    <div id="createCourseModal" class="modal">
        <div class="modal-content">
            <h3>Создать курс</h3>
            <input type="text" id="courseNameInput" placeholder="Название курса">
            <textarea id="courseDescInput" placeholder="Описание курса"></textarea>
            <div class="modal-buttons">
                <button onclick="adminCreateCourseSubmit()" class="btn-primary">Создать</button>
                <button onclick="hideModal('createCourseModal')" class="btn-secondary">Отмена</button>
            </div>
        </div>
    </div>

    <!-- Модальное окно для создания теста -->
    <div id="createTestModal" class="modal">
        <div class="modal-content">
            <h3>Создать тест</h3>
            <input type="hidden" id="createTestCourseId">
            <input type="text" id="testNameInput" placeholder="Название теста">
            <div class="modal-buttons">
                <button onclick="adminCreateTestSubmit()" class="btn-primary">Создать</button>
                <button onclick="hideModal('createTestModal')" class="btn-secondary">Отмена</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
