<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Система тестирования</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Шапка -->
    <div id="statusBar">
        <span id="userStatus">Статус: Неизвестный</span>
        <span id="userInfo"></span>
    </div>

    <!-- Состояние 1: Неизвестный -->
    <div id="stateUnknown" class="state active">
        <h1>Вход в систему</h1>
        <div>
            <button onclick="startAuth('github')">GitHub</button>
            <button onclick="startAuth('yandex')">Яндекс</button>
            <button onclick="showCodeModal()">По коду</button>
        </div>
    </div>

    <!-- Состояние 2: Анонимный -->
    <div id="stateAnonymous" class="state">
        <h2>Ожидание подтверждения...</h2>
        <div>
            <div class="spinner"></div>
            <p>Ожидайте подтверждения входа</p>
            <button onclick="cancelAuth()">Отмена</button>
        </div>
    </div>

    <!-- Состояние 3: Авторизованный -->
    <div id="stateAuthorized" class="state">
        <!-- Навигация -->
        <div class="nav">
            <button onclick="showSection('courses')" class="active">Мои курсы</button>
            <button onclick="showSection('allcourses')">Все курсы</button>
            <button onclick="showSection('tests')">Тесты</button>
            <button onclick="showSection('results')">Результаты</button>
            <button onclick="showSection('profile')">Профиль</button>
            <button onclick="showSection('admin')" style="display:none;">Админ</button>
            <button onclick="logout()">Выйти</button>
        </div>

        <!-- Контент -->
        <div id="content">
            <!-- Мои курсы -->
            <div id="sectionCourses" class="section active">
                <h2>Мои курсы</h2>
                <div id="coursesList">Загрузка...</div>
            </div>

            <!-- Все курсы -->
            <div id="sectionAllcourses" class="section">
                <h2>Все курсы</h2>
                <div id="allCoursesList">Загрузка...</div>
            </div>

            <!-- Тесты -->
            <div id="sectionTests" class="section">
                <h2>Тесты</h2>
                <div id="courseInfo"></div>
                <div id="testsList">Загрузка...</div>
            </div>

            <!-- Результаты -->
            <div id="sectionResults" class="section">
                <h2>Результаты</h2>
                <div id="resultsList">Загрузка...</div>
            </div>

            <!-- Профиль -->
            <div id="sectionProfile" class="section">
                <h2>Профиль</h2>
                <div id="profileContent">Загрузка...</div>
            </div>

            <!-- Админ -->
            <div id="sectionAdmin" class="section">
                <h2>Админ-панель</h2>
                <div>
                    <button onclick="createCourseDialog()">Создать курс</button>
                    <button onclick="showAllUsers()">Все пользователи</button>
                </div>
                <div id="adminContent"></div>
            </div>

            <!-- Тест -->
            <div id="sectionTest" class="section">
                <h2 id="testTitle">Тест</h2>
                <div id="questionCounter">Вопрос 0/0</div>
                <div id="testContent"></div>
                <button onclick="finishTest()">Завершить тест</button>
            </div>

            <!-- Результат теста -->
            <div id="sectionTestResult" class="section">
                <h2>Результат теста</h2>
                <div id="testResultContent"></div>
                <button onclick="backToTests()">Вернуться к тестам</button>
            </div>
        </div>
    </div>

    <!-- Модалка для кода -->
    <div id="codeModal" class="modal" style="display:none;">
        <div>
            <h3>Вход по коду</h3>
            <input type="text" id="authCode" maxlength="6" placeholder="123456">
            <button onclick="submitCode()">Войти</button>
            <button onclick="hideCodeModal()">Отмена</button>
        </div>
    </div>

    <!-- Модалка создания курса -->
    <div id="createCourseModal" class="modal" style="display:none;">
        <div>
            <h3>Создать курс</h3>
            <input type="text" id="courseName" placeholder="Название">
            <textarea id="courseDesc" placeholder="Описание"></textarea>
            <button onclick="createCourse()">Создать</button>
            <button onclick="hideModal('createCourseModal')">Отмена</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
